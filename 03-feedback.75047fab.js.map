{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SCAA,MAAMC,EAAO,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,GAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WAIvCC,EAAOV,IACX,IACE,MAAME,EAAkBG,aAAaM,QAAQX,GAC7C,OAA2B,OAApBE,OAA2BU,EAAYT,KAAKU,MAAMX,GACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WDXvCK,EAAM,GACNC,EAAO,CACXN,QAASO,SAASC,cAAc,YAChCC,MAAOF,SAASC,cAAc,SAC9BE,KAAMH,SAASC,cAAc,SAE/BT,QAAQY,IAAI,MACZL,EAAKI,KAAKE,iBAAiB,QAASC,EAAAzB,GAAE0B,UAmBtC,SAAiBC,GACfA,EAAMC,iBACFD,EAAME,gBACRZ,EAAIa,MAAQH,EAAME,cAAc,GAAGzB,MACnCa,EAAIL,QAAUe,EAAME,cAAc,GAAGzB,OAEvCF,EAAK,sBAAuBI,KAAKC,UAAUU,MAzBW,MACxDC,EAAKI,KAAKE,iBAAiB,UA2B3B,SAAsBO,GACpBA,EAAIH,iBACJ,MAAMI,EAAeD,EAAIF,cAAcI,SAElCD,EAAaF,MAAM1B,OAAU4B,EAAapB,QAAQR,OAGrDa,EAAIa,MAAQE,EAAaF,MAAM1B,MAC/Ba,EAAIL,QAAUoB,EAAapB,QAAQR,MACnCO,QAAQY,IAAIN,GACZT,aAAa0B,QACbhB,EAAKG,MAAMjB,MAAQ,GACnBc,EAAKN,QAAQR,MAAQ,IAPrB+B,MAAM,kCASR,OAAOlB,KAxCT,IACE,MAAMmB,EAAoBvB,EAAK,uBAC/B,GAAIuB,EAAmB,CACrB,MAAMC,EAAU/B,KAAKU,MAAMoB,GACvBC,EAAQP,MACVZ,EAAKG,MAAMjB,MAAQiC,EAAQP,MAE3BZ,EAAKG,MAAMjB,MAAQ,GAEjBiC,EAAQzB,QACVM,EAAKN,QAAQR,MAAQiC,EAAQzB,QAE7BM,EAAKN,QAAQR,MAAQ,IAGzB,MAAOM","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport { save, load } from './storage';\n\nconst obj = {};\nconst refs = {\n  message: document.querySelector('textarea'),\n  input: document.querySelector('input'),\n  form: document.querySelector('form'),\n};\nconsole.log('ss');\nrefs.form.addEventListener('input', _.throttle(onInput, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\ntry {\n  const localStorageInput = load('feedback-form-state');\n  if (localStorageInput) {\n    const storage = JSON.parse(localStorageInput);\n    if (storage.email) {\n      refs.input.value = storage.email;\n    } else {\n      refs.input.value = '';\n    }\n    if (storage.message) {\n      refs.message.value = storage.message;\n    } else {\n      refs.message.value = '';\n    }\n  }\n} catch (error) {}\n\nfunction onInput(event) {\n  event.preventDefault();\n  if (event.currentTarget) {\n    obj.email = event.currentTarget[0].value;\n    obj.message = event.currentTarget[1].value;\n  }\n  save('feedback-form-state', JSON.stringify(obj));\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const formElements = evt.currentTarget.elements;\n\n  if (!formElements.email.value || !formElements.message.value) {\n    alert('все поля должны быть заполнены');\n  } else {\n    obj.email = formElements.email.value;\n    obj.message = formElements.message.value;\n    console.log(obj);\n    localStorage.clear();\n    refs.input.value = '';\n    refs.message.value = '';\n  }\n  return obj;\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {save,load};\n"],"names":["$kEUo3","parcelRequire","$3fff5e8daf4b13a6$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$3fff5e8daf4b13a6$export$11e63f7b0f3d9900","getItem","undefined","parse","$945622fd0f572e60$var$obj","$945622fd0f572e60$var$refs","document","querySelector","input","form","log","addEventListener","$parcel$interopDefault","throttle","event","preventDefault","currentTarget","email","evt","formElements","elements","clear","alert","localStorageInput","storage"],"version":3,"file":"03-feedback.75047fab.js.map"}