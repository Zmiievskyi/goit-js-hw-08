{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SCAMC,EAAO,SAACC,EAAKC,GACjB,IACE,IAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,GAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WDFvCC,EAAM,GACNC,EAAO,CACXF,QAASG,SAASC,cAAc,YAChCC,MAAOF,SAASC,cAAc,SAC9BE,KAAMH,SAASC,cAAc,SAE/BL,QAAQQ,IAAI,MACZL,EAAKI,KAAKE,iBAAiB,QAASC,EAAArB,GAAEsB,UAmBtC,SAAiBC,GACfA,EAAMC,iBACFD,EAAME,gBACRZ,EAAIa,MAAQH,EAAME,cAAc,GAAGrB,MACnCS,EAAID,QAAUW,EAAME,cAAc,GAAGrB,OAEvCF,EAAK,sBAAuBI,KAAKC,UAAUM,MAzBW,MACxDC,EAAKI,KAAKE,iBAAiB,UA2B3B,SAAsBO,GACpBA,EAAIH,iBACJ,IAAMI,EAAeD,EAAIF,cAAcI,SAElCD,EAAaF,MAAMtB,OAAUwB,EAAahB,QAAQR,OAGrDS,EAAIa,MAAQE,EAAaF,MAAMtB,MAC/BS,EAAID,QAAUgB,EAAahB,QAAQR,MACnCO,QAAQQ,IAAIN,GACZL,aAAasB,QACbhB,EAAKG,MAAMb,MAAQ,GACnBU,EAAKF,QAAQR,MAAQ,IAPrB2B,MAAM,kCASR,OAAOlB,KAxCT,IACE,IAAMmB,ECJK,SAAA7B,GACX,IACE,IAAME,EAAkBG,aAAayB,QAAQ9B,GAC7C,OAA2B,OAApBE,OAA2B6B,EAAY5B,KAAK6B,MAAM9B,GACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,UDDjB,CAAK,uBAC/B,GAAIoB,EAAmB,CACrB,IAAMI,EAAU9B,KAAK6B,MAAMH,GACvBI,EAAQV,MACVZ,EAAKG,MAAMb,MAAQgC,EAAQV,MAE3BZ,EAAKG,MAAMb,MAAQ,GAEjBgC,EAAQxB,QACVE,EAAKF,QAAQR,MAAQgC,EAAQxB,QAE7BE,EAAKF,QAAQR,MAAQ,IAGzB,MAAOM,K","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport { save, load } from './storage';\n\nconst obj = {};\nconst refs = {\n  message: document.querySelector('textarea'),\n  input: document.querySelector('input'),\n  form: document.querySelector('form'),\n};\nconsole.log('ss');\nrefs.form.addEventListener('input', _.throttle(onInput, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\ntry {\n  const localStorageInput = load('feedback-form-state');\n  if (localStorageInput) {\n    const storage = JSON.parse(localStorageInput);\n    if (storage.email) {\n      refs.input.value = storage.email;\n    } else {\n      refs.input.value = '';\n    }\n    if (storage.message) {\n      refs.message.value = storage.message;\n    } else {\n      refs.message.value = '';\n    }\n  }\n} catch (error) {}\n\nfunction onInput(event) {\n  event.preventDefault();\n  if (event.currentTarget) {\n    obj.email = event.currentTarget[0].value;\n    obj.message = event.currentTarget[1].value;\n  }\n  save('feedback-form-state', JSON.stringify(obj));\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const formElements = evt.currentTarget.elements;\n\n  if (!formElements.email.value || !formElements.message.value) {\n    alert('все поля должны быть заполнены');\n  } else {\n    obj.email = formElements.email.value;\n    obj.message = formElements.message.value;\n    console.log(obj);\n    localStorage.clear();\n    refs.input.value = '';\n    refs.message.value = '';\n  }\n  return obj;\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {save,load};\n"],"names":["$1WSnx","parcelRequire","$e40a24b7fc93604f$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$b00c40859be242c5$var$obj","$b00c40859be242c5$var$refs","document","querySelector","input","form","log","addEventListener","$parcel$interopDefault","throttle","event","preventDefault","currentTarget","email","evt","formElements","elements","clear","alert","$b00c40859be242c5$var$localStorageInput","getItem","undefined","parse","$b00c40859be242c5$var$storage"],"version":3,"file":"03-feedback.55a2d898.js.map"}