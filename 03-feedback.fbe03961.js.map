{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SCAA,MAAMC,EAAO,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,GAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WAIvCC,EAAOV,IACX,IACE,MAAME,EAAkBG,aAAaM,QAAQX,GAC7C,OAA2B,OAApBE,OAA2BU,EAAYT,KAAKU,MAAMX,GACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WDXvCK,EAAM,GACNC,EAAO,CACXN,QAASO,SAASC,cAAc,YAChCC,MAAOF,SAASC,cAAc,SAC9BE,KAAMH,SAASC,cAAc,SAG/BF,EAAKI,KAAKC,iBAAiB,QAASC,EAAAxB,GAAEyB,UAiBtC,SAAiBC,GACfA,EAAMC,iBACwB,UAA1BD,EAAME,OAAOC,WACfZ,EAAIa,MAAQJ,EAAME,OAAOxB,OAEG,aAA1BsB,EAAME,OAAOC,WACfZ,EAAIL,QAAUc,EAAME,OAAOxB,OAE7BF,EAAK,sBAAuBI,KAAKC,UAAUU,MAzBW,MACxDC,EAAKI,KAAKC,iBAAiB,UA2B3B,SAAsBQ,GACpBA,EAAIJ,iBACJ,MAAMK,EAAeD,EAAIE,cAAcC,SAElCF,EAAaF,MAAM1B,OAAU4B,EAAapB,QAAQR,OAGrDa,EAAIa,MAAQE,EAAaF,MAAM1B,MAC/Ba,EAAIL,QAAUoB,EAAapB,QAAQR,MACnCO,QAAQwB,IAAIlB,GACZT,aAAa4B,SALbC,MAAM,kCAOR,OAAOpB,KArCT,IACE,MAAMqB,EAAoBhC,KAAKU,MAAMH,EAAK,wBACtCyB,EAAkBR,MACpBZ,EAAKG,MAAMjB,MAAQkC,EAAkBR,MAErCZ,EAAKG,MAAMjB,MAAQ,GAEjBkC,EAAkB1B,QACpBM,EAAKN,QAAQR,MAAQkC,EAAkB1B,QAEvCM,EAAKN,QAAQR,MAAQ,GAEvB,MAAOM","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport { save, load } from './storage';\n\nconst obj = {};\nconst refs = {\n  message: document.querySelector('textarea'),\n  input: document.querySelector('input'),\n  form: document.querySelector('form'),\n};\n\nrefs.form.addEventListener('input', _.throttle(onInput, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\ntry {\n  const localStorageInput = JSON.parse(load('feedback-form-state'));\n  if (localStorageInput.email) {\n    refs.input.value = localStorageInput.email;\n  } else {\n    refs.input.value = '';\n  }\n  if (localStorageInput.message) {\n    refs.message.value = localStorageInput.message;\n  } else {\n    refs.message.value = '';\n  }\n} catch (error) {}\n\nfunction onInput(event) {\n  event.preventDefault();\n  if (event.target.nodeName === 'INPUT') {\n    obj.email = event.target.value;\n  }\n  if (event.target.nodeName === 'TEXTAREA') {\n    obj.message = event.target.value;\n  }\n  save('feedback-form-state', JSON.stringify(obj));\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const formElements = evt.currentTarget.elements;\n\n  if (!formElements.email.value || !formElements.message.value) {\n    alert('все поля должны быть заполнены');\n  } else {\n    obj.email = formElements.email.value;\n    obj.message = formElements.message.value;\n    console.log(obj);\n    localStorage.clear();\n  }\n  return obj;\n}\n\n\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {save,load};\n"],"names":["$kEUo3","parcelRequire","$3fff5e8daf4b13a6$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$3fff5e8daf4b13a6$export$11e63f7b0f3d9900","getItem","undefined","parse","$945622fd0f572e60$var$obj","$945622fd0f572e60$var$refs","document","querySelector","input","form","addEventListener","$parcel$interopDefault","throttle","event","preventDefault","target","nodeName","email","evt","formElements","currentTarget","elements","log","clear","alert","localStorageInput"],"version":3,"file":"03-feedback.fbe03961.js.map"}