{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SCAMC,EAAO,SAACC,EAAKC,GACjB,IACE,IAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,GAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,WDFvCC,EAAM,GACNC,EAAO,CACXF,QAASG,SAASC,cAAc,YAChCC,MAAOF,SAASC,cAAc,SAC9BE,KAAMH,SAASC,cAAc,SAG/BF,EAAKI,KAAKC,iBAAiB,QAASC,EAAApB,GAAEqB,UAiBtC,SAAiBC,GACfA,EAAMC,iBACwB,UAA1BD,EAAME,OAAOC,WACfZ,EAAIa,MAAQJ,EAAME,OAAOpB,OAEG,aAA1BkB,EAAME,OAAOC,WACfZ,EAAID,QAAUU,EAAME,OAAOpB,OAE7BF,EAAK,sBAAuBI,KAAKC,UAAUM,MAzBW,MACxDC,EAAKI,KAAKC,iBAAiB,UA2B3B,SAAsBQ,GACpBA,EAAIJ,iBACJ,IAAMK,EAAeD,EAAIE,cAAcC,SAElCF,EAAaF,MAAMtB,OAAUwB,EAAahB,QAAQR,OAGrDS,EAAIa,MAAQE,EAAaF,MAAMtB,MAC/BS,EAAID,QAAUgB,EAAahB,QAAQR,MACnCO,QAAQoB,IAAIlB,GACZL,aAAawB,SALbC,MAAM,kCAOR,OAAOpB,KArCT,IACE,IAAMqB,EAAoB5B,KAAK6B,MCLpB,SAAAhC,GACX,IACE,IAAME,EAAkBG,aAAa4B,QAAQjC,GAC7C,OAA2B,OAApBE,OAA2BgC,EAAY/B,KAAK6B,MAAM9B,GACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,UDAN,CAAK,wBACtCsB,EAAkBR,MACpBZ,EAAKG,MAAMb,MAAQ8B,EAAkBR,MAErCZ,EAAKG,MAAMb,MAAQ,GAEjB8B,EAAkBtB,QACpBE,EAAKF,QAAQR,MAAQ8B,EAAkBtB,QAEvCE,EAAKF,QAAQR,MAAQ,GAEvB,MAAOM,K","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport { save, load } from './storage';\n\nconst obj = {};\nconst refs = {\n  message: document.querySelector('textarea'),\n  input: document.querySelector('input'),\n  form: document.querySelector('form'),\n};\n\nrefs.form.addEventListener('input', _.throttle(onInput, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\ntry {\n  const localStorageInput = JSON.parse(load('feedback-form-state'));\n  if (localStorageInput.email) {\n    refs.input.value = localStorageInput.email;\n  } else {\n    refs.input.value = '';\n  }\n  if (localStorageInput.message) {\n    refs.message.value = localStorageInput.message;\n  } else {\n    refs.message.value = '';\n  }\n} catch (error) {}\n\nfunction onInput(event) {\n  event.preventDefault();\n  if (event.target.nodeName === 'INPUT') {\n    obj.email = event.target.value;\n  }\n  if (event.target.nodeName === 'TEXTAREA') {\n    obj.message = event.target.value;\n  }\n  save('feedback-form-state', JSON.stringify(obj));\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const formElements = evt.currentTarget.elements;\n\n  if (!formElements.email.value || !formElements.message.value) {\n    alert('все поля должны быть заполнены');\n  } else {\n    obj.email = formElements.email.value;\n    obj.message = formElements.message.value;\n    console.log(obj);\n    localStorage.clear();\n  }\n  return obj;\n}\n\n\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {save,load};\n"],"names":["$1WSnx","parcelRequire","$e40a24b7fc93604f$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$b00c40859be242c5$var$obj","$b00c40859be242c5$var$refs","document","querySelector","input","form","addEventListener","$parcel$interopDefault","throttle","event","preventDefault","target","nodeName","email","evt","formElements","currentTarget","elements","log","clear","alert","$b00c40859be242c5$var$localStorageInput","parse","getItem","undefined"],"version":3,"file":"03-feedback.1ee71d4b.js.map"}